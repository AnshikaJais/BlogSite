<% extend("base") %>

<div class="blog-container">
    <div class="container-fluid blog">
        <div class="blog__title">
            <h1><%= blog.title %></h1>
            <h3><%= blog.subTitle %></h3>
        </div>
        <div class="blog-description"><%= blog.description %></div>
        <div class="blog-writer-info">
            <img
                src="/img/<%= blog.user.photo %>"
                alt="<%= blog.user.name %>"
            />
            <p><%= blog.user.name %></p>
            <span>
                <i class="fa-regular fa-comment"></i>&nbsp;<%=
                blog.commentsQuantity %>
            </span>
        </div>
        <div class="blog-date">
            <p><%= blog.createdAt %></p>
        </div>
    </div>
    <hr />
    <div class="comments">
        <div class="write-comment">
            <div class="current-user-info">
                <img src="/img/<%= user.photo %>" alt="Current User" />
                <p><%= user.name %></p>
            </div>
            <div class="mb-3">
                <form class="comment-form">
                    <textarea
                        class="form-control"
                        id="comment"
                        rows="3"
                        placeholder="Write your comment..."
                    ></textarea>
                    <input type="hidden" name="blog" value="<%= blog._id %>" />
                    <input type="hidden" name="user" value="<%= user.id %>" />
                    <button type="submit" class="btn btn-dark">post</button>
                </form>
            </div>
        </div>
        <div class="posted-comment">
            <% blog.comments.forEach((comment)=> { %>
            <div class="post-user-info">
                <img
                    src="/img/<%= comment.user.photo %>"
                    alt="<%= comment.user.name %>"
                />
                <p><%= comment.user.name %></p>
            </div>
            <p><%= comment.comment %></p>
            <% }) %>
        </div>
    </div>
</div>
